# 加解密

## 使用 node-rsa 生成秘钥

```js
const NodeRSA = require('node-rsa');
// 生成秘钥
const key = new NodeRSA({b: 512});
// 导出公、私钥
const private = key.exportKey('private');
const public = key.exportKey('public');
console.log(private);
console.log(public);
```

## 前端使用生成的公钥进行加密

返回 base64 类型密文数据

'mima' ==> dc8kQJxbSSOvwtL3JgTRi0ahvrlq/Os6yINcjGxDddXvyhnOYclZdLJSWG7bWYbQ8NgoQKyO1v3iAosgDA5toA==

```js
// 公钥
const key = `-----BEGIN PUBLIC KEY-----
MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAIEKWBxz26d+y5CMgCVQxt/4uAO8wpFS
Vn/EsCawsV8z09tq+UyHXt33x1rSabAZ1KW7etf9uqh0LS19LwtoGx0CAwEAAQ==
-----END PUBLIC KEY-----`;
```

## 后端使用生成的私钥进行解密

```js
const NodeRSA = require('node-rsa');
// 私钥
const key = `-----BEGIN RSA PRIVATE KEY-----
MIIBOQIBAAJBAIEKWBxz26d+y5CMgCVQxt/4uAO8wpFSVn/EsCawsV8z09tq+UyH
Xt33x1rSabAZ1KW7etf9uqh0LS19LwtoGx0CAwEAAQJAIWlVQSC6ihbpjGbks0TE
Ca/zrXwNgOUp4nFCDvKHKpf3DGsYawQGV7yMrHrBZm6A+2XtTI9YxN4HobwmwXrc
vQIhAOYlV+wi2Vpo3JihN5RbRjBUCcf6UyBHfGz1l82JVEHnAiEAj4lbOhaWv7Zu
f4bog8G4qUi0PN5KUS05hQ2keNosIlsCIBI0YgALwaWlJc3s8riJf8PS4fMvmeOz
w+PaiWd4tXGBAiAJGjDK0jvlFHCVbby4/kPzmES1x3L3CuMm6OKRN2StGQIgAmBU
zg20BYNe8rAsII4GFYbZFDqiRX9pO/v5yBF7Qhs=
-----END RSA PRIVATE KEY-----`;
// 传入私钥创建私钥对象
const privateKey = new NodeRSA(key);

// 对数据进行解密
const decrypted = key.decrypt(encrypted, 'utf8');
```
