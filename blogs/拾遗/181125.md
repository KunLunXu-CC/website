# 拾遗 181125

## 一个DOM是否是另一个元素的子集

- document.documentElement.contains(document.body)

## 递归处理数据(找儿子)

```js
const handlerFileCatalogList = (catalogList = []) => {
  const parents = catalogList.filter(v => !v.location_id);
  const loop = (parent) => {
    const child = [];
    catalogList.forEach((item, index) => {
      if(parent.id === item.location_id){
        child.push(item);
        loop(item);
      }
    });
    parent.child = child;
    return parent;
  }
  parents.forEach((item, index) => {
    loop(item);
  });
  return parents;
}

// 有数据如下, location_id 为空的是最顶层数据(祖先), location_id 指向父级(爸爸)
const fileCatalogList = [
  {
    id: '2',
    title: '文件目录标题',
    path: '路径',
    address: '位置',
    location_id: '',
  }, {
    id: '3',
    title: '文件目录标题',
    path: '路径',
    address: '位置',
    location_id: '2',
  }, {
    id: '4',
    title: '文件目录标题',
    path: '路径',
    address: '位置',
    location_id: '3',
  }, {
    id: '5',
    title: '文件目录标题',
    path: '路径',
    address: '位置',
    location_id: '3',
  }
];

// 调用函数将数据进行处理成树结构 [{ child: [] }]
handlerFileCatalogList(fileCatalogList);

// 将树结构的数据渲染出来
const treeNode = () => {
    const fileCatalogList = handlerFileCatalogList(fileCatalogList);
    const loop = (dataList) => {
      dataList.map(v => {
        return (
          <TreeNode value={v.id} title={v.title} key={v.id}>
            { v.child && v.child.length > 0 ? loop(v.child) : null }
          </TreeNode>
        );
      });
    };
    return loop(fileCatalogList);
  }

```

## 删除远程分支 LH/feature/181127-menu

- git push origin --delete LH/feature/181127-menu

## 删除本地分支 LH/feature/181127-menu

- git branch -D LH/feature/181127-menu

## 分页查询有感

- 查询函数应该有2个参数: 当前页、 查询数目
- 如果数据都存储在状态管理器中那么当前页以及查询数目不应该存放在前端
- 并且只在在请求查询API时从查询条件中获取数据对当前页以及查询数目进行修改
- 如此前端只需要一个查询方法即可实现所有查询情况

## 路由设置状态及获取

```js
// 跳转且传数据
    import { browserHistory } from 'react-router';

    browserHistory.push({
      state: {....}
      pathname: '/bill/bill-query'
    });
// 获取状态
this.props.location.state

// 修改状态： 直接覆盖路由修改状态
browserHistory.replace({
  state: {
    operations: null,
    receiverId: null,
    storer: null,
    receiver: null,
    billTypeParent: null
  },
  pathname: '/bill/bill-query'
});
```